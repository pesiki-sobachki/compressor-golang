# Go Image Compressor Service

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–∂–∞—Ç–∏—è –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go.
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **–ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Ports and Adapters)**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–í –∫–∞—á–µ—Å—Ç–≤–µ –¥–≤–∏–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `libvips` (—á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç `bimg`), —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–∏—Å —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –±—ã—Å—Ç—Ä—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –ø–æ –ø–∞–º—è—Ç–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –Ω–∞ —á–∏—Å—Ç–æ–º Go.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞.
*   **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JPEG, PNG, WEBP.
*   **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `libvips`.
*   **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫.
*   **HTTP API:** –ü—Ä–æ—Å—Ç–æ–π REST API –Ω–∞ –±–∞–∑–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ `Gin`.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É `Standard Go Project Layout` –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ —Å–ª–æ–∏:

\`\`\`text
/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ compressor-server/   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (Main), —Å–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ internal/                # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–¥ (–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏–∑–≤–Ω–µ)
‚îÇ   ‚îî‚îÄ‚îÄ adapter/             # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤ (–ê–¥–∞–ø—Ç–µ—Ä—ã)
‚îÇ       ‚îú‚îÄ‚îÄ processor/       # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è bimg (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫)
‚îÇ       ‚îî‚îÄ‚îÄ repository/      # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ pkg/                     # –ü—É–±–ª–∏—á–Ω—ã–π –∫–æ–¥ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ core/                # –Ø–¥—Ä–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (Domain, Ports, Services)
‚îÇ       ‚îú‚îÄ‚îÄ domain/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (File, Options)
‚îÇ       ‚îú‚îÄ‚îÄ port/            # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤)
‚îÇ       ‚îî‚îÄ‚îÄ service/         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îî‚îÄ‚îÄ storage/                 # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∂–∞—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤
\`\`\`

## üõ† API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

### POST \`/upload\`

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–∂–∏–º–∞–µ—Ç –µ–≥–æ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (Multipart/Form-Data):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|--------|-------------|----------|-----------------------|
| \`image\`   | File   | **–î–∞**      | –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | - |
| \`format\`  | String | –ù–µ—Ç         | –¶–µ–ª–µ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç (\`jpeg\`, \`png\`, \`webp\`) | \`jpeg\` |
| \`quality\` | Int    | –ù–µ—Ç         | –ö–∞—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç–∏—è (1-100) | \`80\` |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):**

\`\`\`bash
curl -X POST http://localhost:8080/upload \\
  -F "image=@/path/to/your/photo.jpg" \\
  -F "format=webp" \\
  -F "quality=75"
\`\`\`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (JSON):**

\`\`\`json
{
  "status": "success",
  "original_size": 5242880,
  "compressed_path": "storage/uuid-filename.webp",
  "message": "File compressed and saved successfully!"
}
\`\`\`

## ÔøΩÔøΩ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ—Å–æ–±–µ–Ω–Ω–æ \`libvips\`) –∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [INSTALL.md](INSTALL.md).

## üõ£ Roadmap (–ü–ª–∞–Ω—ã)

*   [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —è–¥—Ä–∞ –∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
*   [x] HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ Gin
*   [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É S3 (AWS, MinIO) —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
*   [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ —Ñ–∞–π–ª/ENV (Viper)
*   [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (Docker)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.
